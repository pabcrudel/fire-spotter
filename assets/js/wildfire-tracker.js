const firmsURL=(t,a)=>{return`https://firms.modaps.eosdis.nasa.gov/api/area/csv/8b8845657503cd8c75f8b4a0a7f8b177/${t}/-21,30,-4,43/1/`+(a=void 0===a?(t=new Date).getFullYear()+`-${String(t.getMonth()+1).padStart(2,"0")}-`+String(t.getDate()).padStart(2,"0"):a)},openWeatherURL=(t,a)=>`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${a}&appid=efd53a1ca3bae9d1aae362ddf19cbbeb`,flammability=[[1.1,1.1,1.1,1.1],[1.1,1.1,1.1,1.2],[1.1,1.1,1.1,1.3],[1.2,1.1,1.1,1.4],[1.26,1.25,1.2,1.25],[1.1,1.5,1.3,1.15],[1.15,1.85,1.4,1.1],[1.18,2,1.5,1.26],[1.2,1.85,1.6,1.2],[1.1,1.5,1.7,1.1],[1.1,1.25,1.8,1.1],[1.1,1.1,1.7,1.1],[1.1,1.1,1.5,1.1],[1.1,1.1,1.3,1.1]];async function fetchFirmsData(){var t=[],a="MODIS_NRT";try{var e=(await(await fetch(firmsURL(a))).text()).trim().split("\n").slice(1);t.push({source:a,data:e})}catch(t){}return t}async function formatFirmsData(){var a=await fetchFirmsData();let e=[];if(0<a.length)for(let t=0;t<a.length;t++){var{source:r,data:i}=a[t];for(let t=0;t<i.length;t++){var n=(i[t]+=","+r).split(","),o=parseFloat(n[0]),s=parseFloat(n[1]),f=parseInt(n[6].padStart(4,"0").substring(0,2)),n=n[n.length-1];e.push({latitude:o,longitude:s,t:n,hour:f})}}return e=0<e.length?sortFirmsPoints(e):e}function sortFirmsPoints(t){let r=0,i=0,n=0,o=[],s=[],f=[],p="";return t.sort((t,a)=>t.latitude-a.latitude).map(t=>{var{latitude:a,longitude:e}=t,a=Math.round(a)+","+Math.round(e);a!==p&&(0<r&&(4<=f.length?s[n++]=f:o[i++]=f,f=[],r=0),r++,p=a),f.push(t)}),{i:o,o:s}}async function fetchOpenWeatherData(t,a){var t=await(await fetch(openWeatherURL(t,a))).json(),a=t.wind.deg,e=t.wind.speed,r=void 0!==t.wind.gust,{p:i,l:n}=t.main;return{h:a,m:e,u:r,p:i,l:n,g:t.name}}function propagationAlgorithm(t,a,e,r,i){t=(t-173.15)/(373.15-173.15)*.9+.1,a=(100-a)/100;let n=-1;6<=i&&i<=19&&(n=i-6);i=(t=0)=>{let a=.0111*(e-t-45)+.5;return a=e<45||90<e?1-a:a};let o;o=0<e&&e<90?i():90<e&&e<180?i(90):180<e&&e<270?i(180):270<e&&e<360?i(270):45===e||135===e||225===e||315===e?.5:1;i=t=>o*(-1===n?1:flammability[n][t]);let s;return s=45<e&&e<135?i(2):135<e&&e<225?i(0):225<e&&e<315?i(3):315<e&&e<45?i(1):o,3600*r*o*a*.5*t*s}export{formatFirmsData,fetchOpenWeatherData,propagationAlgorithm};